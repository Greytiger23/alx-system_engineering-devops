#!/usr/bin/env bash
# Bash script with the minimum number of commands to automate your fix
nginx -t
if ! command -v nginx &> /dev/null; then
	echo "Nginx is not installed"
	exit 1
fi
if ! pgrep nginx &> /dev/null then
	echo "Nginx is starting..."
	service nginx start
fi
if ! lsof -i :80 &> /dev/null; then
	echo "Nginx is not listening on port 80"
else
	echo "Nginx is now listening on port 80"
	exit 1
fi
if ! ufw status | grep "80" &> /dev/null; then
	echo "Firewall is not allowing traffic on port 80, enabling it..."
	ufw allow 80
fi
echo "Restarting Nginx..."
service nginx restart
echo "Nginx is now configured to listen on port 80"
